module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=10)}([function(t,e,n){"use strict";n.r(e);var r=n(1);var o={isClearOldStorage:!1},a={isDev:!1,webDebugToolKey:void 0,state:Object(r.Map)({}),setStateFunctions:{},throttles:{},replaceTimer:{},middlewares:[],getIn:function(t){return a.state.getIn(t)},setIn:function(t,e){var n=e.data,r=void 0===n?null:n,i=e.loading,u=void 0!==i&&i,d=e.error,f=void 0===d?void 0:d,l=a.state.getIn(t);null===r&&(r=l&&l.data);var s={data:r,loading:u,error:f};if(l||function(t,e){for(var n=[],r=0;r<e.length-2;r++)n.push(e[r]),t.getIn(n)||t.setIn(n,{})}(a.state,t),(void 0===l||l!==r&&JSON.stringify(l)!==JSON.stringify(s))&&(a.state=a.state.setIn(t,{data:r,loading:u,error:f}),a.middlewares.forEach(function(e){e(t,a,l,s)})),a.webDebugToolKey){var c={};a.state.forEach(function(t,e){c[e]=t}),o.isClearOldStorage||(window.sessionStorage.setItem(a.webDebugToolKey,"{}"),o.isClearOldStorage=!0),window.sessionStorage.setItem(a.webDebugToolKey,JSON.stringify(c))}},logState:function(){a.isDev},errorMiddlewares:[]};e.default=a},function(t,e){t.exports=require("immutable")},function(t,e){t.exports=require("react")},function(t,e,n){"use strict";n.r(e),n.d(e,"config",function(){return a}),n.d(e,"initGraphqlConfig",function(){return i});var r=n(6),o=n(0);var a={url:"/graphql"};function i(t){var e=t.url,n=t.errorFn;if("string"!==typeof e)throw"[initGraphqlConfig] url typeof is't string";if(a.url=e,"function"!==typeof n)throw"[initGraphqlConfig] errorFn typeof is't function";return a.errorFn=n,a}e.default=function(t){var e=t.gql,n=t.variables,i=t.path,u=t.dataSetter,d=t.oldState;return new Promise(function(t){try{Object(r.request)(a.url,e,n).then(function(e){"function"===typeof u&&(e=u(e)),o.default.setIn(i,{data:e,loading:!1,error:void 0}),t(o.default.state.getIn(i),o.default.state)}).catch(function(e){var n=function(t){try{return t()}catch(e){return}}(function(){return e.response.errors[0].message});o.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(i,o.default,e,d)}),o.default.setIn(i,{data:d.data,loading:!1,error:n}),t(o.default.state.getIn(i),o.default.state)})}catch(f){}})}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}n.r(e);var a=n(7),i=n.n(a),u=n(0);n.d(e,"DEFAULT_CONFIG",function(){return d}),n.d(e,"initRESTfulConfig",function(){return f});var d={headers:{"Content-Type":"application/json"}};function f(t){for(var e in t)d[e]=t[e];return d}e.default=function(t){var e=t.url,n=t.method,r=t.body,a=t.variables,f=t.config,l=void 0===f?d:f,s=t.path,c=t.dataSetter,v=t.oldState,p=t.responseType,g=void 0===p?"json":p,y=t.responseErrorType,h=void 0===y?"text":y;return new Promise(function(t){var d,f;d=a?i()(e,a):e,f=o({},l,r?{method:n,body:JSON.stringify(r)}:{method:n}),fetch(d,f).then(function(t){return t.ok?{data:t[g](),ok:t.ok,status:t.status}:Promise.reject(t[h]())}).then(function(e){if(e&&e.data&&e.data.then)e.data.then(function(n){var r=e.ok,o=e.status;"function"===typeof c&&(n=c(n)),u.default.setIn(s,{data:n,loading:!1,error:r?void 0:o}),t(u.default.state.getIn(s),u.default)});else{var n=e.data,r=e.ok,o=e.status;"function"===typeof c&&(n=c(n)),u.default.setIn(s,{data:n,loading:!1,error:r?void 0:o}),t(u.default.state.getIn(s),u.default)}}).catch(function(e){e.then?e.then(function(e){u.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(e,u.default,s,v)}),u.default.setIn(s,{data:v.data,loading:!1,error:e}),t(u.default.state.getIn(s),u.default)}):(u.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(s,u.default,e,v)}),u.default.setIn(s,{data:v.data,loading:!1,error:e}),t(u.default.state.getIn(s),u.default))})})}},,function(t,e){t.exports=require("graphql-request")},function(t,e){t.exports=require("pure-fn/lib/parserURL")},,,function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(d){o=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(e);var o=n(2),a=n(3),i=n(4),u=n(0);n.d(e,"fixDataSetter",function(){return f}),n.d(e,"default",function(){return l});var d=0;function f(t,e){return"function"===typeof t?t(e):e}function l(t){var e=t.kind,n=t.path,l=t.gql,s=t.url,c=t.data,v=void 0===c?null:c,p=t.body,g=void 0===p?null:p,y=t.variables,h=void 0===y?null:y,b=t.loading,S=t.error,I=t.config,O=t.method,m=void 0===O?"GET":O,w=t.dataSetter,x=t.optimistic,j=void 0===x?null:x,T=t.responseType,E=void 0===T?void 0:T,F=t.responseErrorType,q=void 0===F?void 0:F,D=t.once,P=void 0!==D&&D,C=t.updateAtInit,A=void 0!==C&&C,M=t.isUpdate,k=void 0===M||M,U=t.interval,N=void 0===U?0:U,_=t.updateAtLoading,J=void 0!==_&&_,G=r(Object(o.useState)({loading:!1,error:void 0,data:void 0}),2),L=G[0],R=G[1],K=r(Object(o.useState)(void 0),2),B=K[0],V=K[1],z=Object(o.useRef)(void 0),H=JSON.stringify(n),Q=Object(o.useCallback)(function(t,r){var o=t.nextUpdateAtInit,d=void 0===o||o,c=t.nextUpdateAtLoading,p=void 0===c?J:c,y=t.nextIsUpdate,O=void 0===y?k:y,x=t.nextData,T=void 0===x?v:x,F=t.nextBody,D=void 0===F?g:F,C=t.nextVariables,A=void 0===C?h:C,M=t.nextLoading,U=void 0===M?b:M,N=t.nextError,_=void 0===N?S:N,G=t.nextOnce,L=void 0===G?P:G,K=t.nextOptimistic,B=void 0===K?j:K;if(!L||!u.default.throttles[H]){!L&&u.default.throttles[H]?delete u.default.throttles[H]:u.default.throttles[H]||(u.default.throttles[H]=!0),u.default.setStateFunctions[H]||(u.default.setStateFunctions[H]={}),O&&r&&!u.default.setStateFunctions[H][r]&&(u.default.setStateFunctions[H][r]=function(){R(function(){return u.default.getIn(n)})}),e||(e=l?"graphql":s?"REST":"local");var V=u.default.getIn(n)||{};if(null!==B?u.default.setIn(n,{data:f(w,B),loading:U||!1,error:_}):"local"!==e?u.default.setIn(n,{loading:!0}):u.default.setIn(n,{data:f(w,T),loading:U||!1,error:_}),d){if("local"===e||p)for(var z in u.default.setStateFunctions[H])u.default.setStateFunctions[H][z]();"graphql"===e?Object(a.default)({gql:l,variables:A,path:n,dataSetter:w,oldState:V}).then(function(){for(var t in u.default.setStateFunctions[H])u.default.setStateFunctions[H][t]()}):"REST"===e&&Object(i.default)({url:s,method:m,body:D,variables:A,config:I,path:n,dataSetter:w,oldState:V,responseType:E,responseErrorType:q}).then(function(){for(var t in u.default.setStateFunctions[H])u.default.setStateFunctions[H][t]()})}}});return Object(o.useEffect)(function(){if(u.default.isDev&&(!n||0===n.length))throw new Error("[useDen] path is empty");var t=++d;return N>0?(z.current&&clearInterval(z.current),z.current=setInterval(function(){Q({nextUpdateAtInit:A})},N),V(function(){return function(){clearInterval(z.current),u.default.replaceTimer[JSON.stringify(n)]=void 0}})):Q({nextUpdateAtInit:A},t),function(){"function"===typeof B&&B(),delete u.default.setStateFunctions[H][t]}},[H,k,P,A,N]),[L,Q,B]}}]);
//# sourceMappingURL=useDen.js.map