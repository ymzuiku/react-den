module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=12)}([function(t,e,n){"use strict";n.r(e);var r=n(1);var o={isDev:!1,state:Object(r.Map)({}),setStateFunctions:{},throttles:{},middlewares:[],getIn:function(t){return o.state.getIn(t)},setIn:function(t,e){var n=e.data,r=void 0===n?null:n,i=e.loading,a=void 0!==i&&i,u=e.error,d=void 0===u?void 0:u,f=o.state.getIn(t);null===r&&(r=f&&f.data);var l={data:r,loading:a,error:d};if(f||function(t,e){for(var n=[],r=0;r<e.length-2;r++)n.push(e[r]),t.getIn(n)||t.setIn(n,{})}(o.state,t),(void 0===f||f!==r&&JSON.stringify(f)!==JSON.stringify(l))&&(o.state=o.state.setIn(t,{data:r,loading:a,error:d}),o.middlewares.forEach(function(e){e(t,o,f,l)})),o.isDev){var c={};o.state.forEach(function(t,e){c[e]=t}),window.sessionStorage.setItem("react-den-dev",JSON.stringify(c))}},logState:function(){o.isDev},errorMiddlewares:[]};e.default=o},function(t,e){t.exports=require("immutable")},function(t,e){t.exports=require("pure-fn/lib/storage")},function(t,e){t.exports=require("react")},function(t,e,n){"use strict";n.r(e),n.d(e,"middlewareListener",function(){return d}),n.d(e,"middlewareLog",function(){return f}),n.d(e,"middlewareAutoLocalStorage",function(){return l});var r=n(2),o=n.n(r),i=n(9),a=n.n(i),u=n(0),d={isUseMiddlewareLog:!1,isUseMiddlewareAutoLocalStorage:!1};function f(t){var e=t.isHidden,n=void 0!==e&&e,r=t.isFormat,o=void 0===r||r,i=t.isSaveLogFunctions,u=void 0===i||i,f=t.formatStringMaxLength,l=void 0===f?500:f;t.titleMaxLength;if(!d.isUseMiddlewareLog)return d.isUseMiddlewareLog=!0,window.denLogList=[],window.denLog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.denLogList.length,e=arguments.length>1?arguments[1]:void 0;window.denLogList.forEach(function(n,r){r>=window.denLogList.length-t&&"function"===typeof n&&n(e)})},function(t,e,r,i){if(e.isDev){var d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=(a()(void 0,[void 0,void 0,void 0,":",":"," ","ms"]),t.join(", "),i&&i.loading),o=i&&i.error;n&&",  loading: ".concat(n),o&&",  error: ".concat(o);JSON.stringify(i&&i.data||"").replace(/"/g,"");var u=r,d=i;if(e){var f=JSON.stringify(u||"undefined",void 0,2),c=JSON.stringify(d||"undefined",void 0,2);f.length<l&&(u=f),c.length<l&&(d=c)}};n||d(o),u&&window.denLogList.push(d)}}}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"react-den-key-need-replace",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!d.isUseMiddlewareAutoLocalStorage){d.isUseMiddlewareAutoLocalStorage=!0;var n=e.map(function(t){return"string"===typeof t?[t]:t});o.a.localName=t;var r=o.a.load()||{},i=function(t){var e=r[t];n.forEach(function(n){f(n)===t&&(u.default.state=u.default.state.setIn(n,e))})};for(var a in r)i(a);return u.default.setIn(["__supine__"],{data:{init:!0,localStateLoaded:!0}}),function(){n.forEach(function(t){var e=f(t),n=r[e],i=u.default.getIn(t);n!==i&&(r[e]=i,o.a.save(r))})}}function f(t){return"|-- ".concat(t.join(", "))}}},function(t,e,n){"use strict";n.r(e),n.d(e,"initGraphqlConfig",function(){return a});var r=n(7),o=n(0);var i={url:"/graphql"};function a(t){var e=t.url,n=t.errorFn;if("string"!==typeof e)throw"[initGraphqlConfig] url typeof is't string";if(i.url=e,"function"!==typeof n)throw"[initGraphqlConfig] errorFn typeof is't function";return i.errorFn=n,i}e.default=function(t){var e=t.gql,n=t.variables,a=t.path,u=t.dataGetter,d=t.oldState;return new Promise(function(t){try{Object(r.request)(i.url,e,n).then(function(e){"function"===typeof u&&(e=u(e)),o.default.setIn(a,{data:e,loading:!1,error:void 0}),t(o.default.state.getIn(a),o.default.state)}).catch(function(e){var n=function(t){try{return t()}catch(e){return}}(function(){return e.response.errors[0].message});o.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(a,o.default,e,d)}),o.default.setIn(a,{data:d.data,loading:!1,error:n}),t(o.default.state.getIn(a),o.default.state)})}catch(f){}})}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}n.r(e);var i=n(8),a=n.n(i),u=n(0);n.d(e,"initRESTfulConfig",function(){return f});var d={headers:{"Content-Type":"application/json"}};function f(t){return d=o({},d,t)}e.default=function(t){var e=t.url,n=t.method,r=t.body,i=t.variables,f=t.config,l=void 0===f?d:f,c=t.path,s=t.dataGetter,v=t.oldState,g=t.responseType,p=void 0===g?"json":g,h=t.responseErrorType,y=void 0===h?"text":h;return new Promise(function(t){var d,f;d=i?a()(e,i):e,f=o({},l,r?{method:n,body:JSON.stringify(r)}:{method:n}),fetch(d,f).then(function(t){return t.ok?{data:t[p](),ok:t.ok,status:t.status}:Promise.reject(t[y]())}).then(function(e){if(e&&e.data&&e.data.then)e.data.then(function(n){var r=e.ok,o=e.status;"function"===typeof s&&(n=s(n)),u.default.setIn(c,{data:n,loading:!1,error:r?void 0:o}),t(u.default.state.getIn(c),u.default)});else{var n=e.data,r=e.ok,o=e.status;"function"===typeof s&&(n=s(n)),u.default.setIn(c,{data:n,loading:!1,error:r?void 0:o}),t(u.default.state.getIn(c),u.default)}}).catch(function(e){e.then?e.then(function(e){u.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(e,u.default,c,v)}),u.default.setIn(c,{data:v.data,loading:!1,error:e}),t(u.default.state.getIn(c),u.default)}):(u.default.errorMiddlewares.forEach(function(t){"function"===typeof t&&t(c,u.default,e,v)}),u.default.setIn(c,{data:v.data,loading:!1,error:e}),t(u.default.state.getIn(c),u.default))})})}},function(t,e){t.exports=require("graphql-request")},function(t,e){t.exports=require("pure-fn/lib/parserURL")},function(t,e){t.exports=require("pure-fn/lib/formatTime")},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.r(e);var o=n(1),i=n(0),a=n(4);function u(t){if("[object Object]"!==Object.prototype.toString.call(t))throw new Error("[initStateToImmutable] params need a Object");return i.default.state=Object(o.Map)(t),i.default.state}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return i.default.middlewares=e?[].concat(r(i.default.middlewares),r(t)).filter(Boolean):t.filter(Boolean),i.default.middlewares}function f(t,e){return i.default.errorMiddlewares=e?[].concat(r(i.default.errorMiddlewares),r(t)):t,i.default.errorMiddlewares}function l(t){if(t)return i.default.isDev=!0,d([Object(a.middlewareLog)({})],!0)}function c(t){i.default.appKey=t}n.d(e,"initStateToImmutable",function(){return u}),n.d(e,"initMiddleware",function(){return d}),n.d(e,"initErrorMiddleware",function(){return f}),n.d(e,"initDevelopment",function(){return l}),n.d(e,"initAppkey",function(){return c})},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(d){o=!0,i=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(e);var o=n(3),i=n.n(o),a=n(5),u=n(6),d=n(0);n.d(e,"fixDataGetter",function(){return l}),n.d(e,"default",function(){return c});var f=0;function l(t,e){return"function"===typeof t?t(e):e}function c(t){var e=t.kind,n=t.path,o=t.gql,c=t.url,s=t.data,v=void 0===s?null:s,g=t.body,p=void 0===g?null:g,h=t.variables,y=void 0===h?null:h,m=t.loading,w=t.error,b=t.config,S=t.method,I=void 0===S?"GET":S,O=t.dataGetter,L=t.optimistic,j=void 0===L?null:L,E=t.responseType,M=void 0===E?void 0:E,x=t.responseErrorType,T=void 0===x?void 0:x,q=t.once,A=void 0!==q&&q,F=t.fetchAtInit,D=void 0!==F&&F,P=t.interval,G=void 0===P?0:P,_=r(i.a.useState({loading:!1,error:void 0,data:void 0}),2),k=_[0],C=_[1],N=r(i.a.useState(void 0),2),J=N[0],R=N[1],U=i.a.useRef({current:void 0}),B=function(t,r){var i=t.nextData,f=void 0===i?v:i,s=t.nextBody,g=void 0===s?p:s,h=t.nextVariables,S=void 0===h?y:h,L=t.nextLoading,j=void 0===L?m:L,E=t.nextError,x=void 0===E?w:E,q=t.nextOnce,F=void 0===q?A:q,D=t.optimistic,P=void 0===D?null:D,G=n.join(",");if(!F||!d.default.throttles[G]){!F&&d.default.throttles[G]?delete d.default.throttles[G]:d.default.throttles[G]||(d.default.throttles[G]=!0),e||(e=o?"graphql":c?"RESTful":"local"),d.default.setStateFunctions[G]||(d.default.setStateFunctions[G]={}),r&&!d.default.setStateFunctions[G][r]&&(d.default.setStateFunctions[G][r]=function(){C(d.default.getIn(n))});var _,k=d.default.getIn(n)||{};for(var N in null!==P?d.default.setIn(n,{data:l(O,P),loading:j,error:x}):"local"!==e?d.default.setIn(n,{loading:!0}):d.default.setIn(n,{data:l(O,f),loading:j,error:x}),d.default.setStateFunctions[G])d.default.setStateFunctions[G][N]();if("local"!==e)"graphql"===e?_=a.default:"RESTful"===e&&(_=u.default),_({gql:o,url:c,variables:S,data:f,body:g,path:n,dataGetter:O,optimistic:P,oldState:k,method:I,config:b,responseType:M,responseErrorType:T}).then(function(){for(var t in d.default.setStateFunctions[G])d.default.setStateFunctions[G][t]()})}};return i.a.useEffect(function(){if(d.default.isDev&&(!n||0===n.length))throw new Error("[useDen] path is empty");var t=++f;return D&&B({once:A,interval:G,data:v,variables:y,body:p,loading:m,error:w,optimistic:j},t),G>0?(U.current=setInterval(function(){B({once:A,interval:G,data:v,variables:y,body:p,loading:m,error:w,optimistic:j},t)},G),R(function(){return function(){clearInterval(U.current),U.current=void 0}})):B({once:A,interval:G,data:v,variables:y,body:p,loading:m,error:w,optimistic:j},t),function(){var e=n.join(",");"function"===typeof J&&J(),delete d.default.setStateFunctions[e][t]}},[JSON.stringify(n),e,c,o,I,A]),[k,B,J]}},function(t,e,n){"use strict";n.r(e);var r=n(0);n.d(e,"cache",function(){return r.default});var o=n(11);n.d(e,"useDen",function(){return o.default});var i=n(4);n.d(e,"middlewareAutoLocalStorage",function(){return i.middlewareAutoLocalStorage}),n.d(e,"middlewareLog",function(){return i.middlewareLog});var a=n(10);n.d(e,"initStateToImmutable",function(){return a.initStateToImmutable}),n.d(e,"initErrorMiddleware",function(){return a.initErrorMiddleware}),n.d(e,"initMiddleware",function(){return a.initMiddleware}),n.d(e,"initDevelopment",function(){return a.initDevelopment});var u=n(5);n.d(e,"initGraphqlConfig",function(){return u.initGraphqlConfig});var d=n(6);n.d(e,"initRESTfulConfig",function(){return d.initRESTfulConfig}),e.default=o.default}]);
//# sourceMappingURL=index.js.map